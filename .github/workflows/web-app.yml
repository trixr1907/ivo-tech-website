name: Web App Build\n\non:\n  push:\n    branches: [main]\n    paths:\n      - 'apps/web/**'\n      - 'package.json'\n      - 'pnpm-lock.yaml'\n      - '.github/workflows/web-app.yml'\n  pull_request:\n    branches: [main]\n    paths:\n      - 'apps/web/**'\n      - 'package.json'\n      - 'pnpm-lock.yaml'\n      - '.github/workflows/web-app.yml'\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n\n      - name: Install pnpm\n        uses: pnpm/action-setup@v3\n        with:\n          version: 9\n          run_install: false\n\n      - name: Get pnpm store directory\n        shell: bash\n        run: |\n          echo \"STORE_PATH=$(pnpm store path --silent)\" >> $GITHUB_ENV\n\n      - name: Setup pnpm cache\n        uses: actions/cache@v4\n        with:\n          path: ${{ env.STORE_PATH }}\n          key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}\n          restore-keys: |\n            ${{ runner.os }}-pnpm-store-\n\n      - name: Install dependencies\n        run: pnpm install --no-frozen-lockfile\n\n      - name: Build Web App\n        run: cd apps/web && pnpm run build\n\n      - name: Upload build artifacts\n        uses: actions/upload-artifact@v4\n        with:\n          name: web-app-build\n          path: apps/web/.next
